===============================
# MT7986A · 最终推荐版 · 极限稳定内核注入
# ImmortalWrt 25.12 / Kernel 6.12
===============================
=================================================
# CPU / 调度（稳定优先，避免频率抖动）
=================================================
CONFIG_HZ=250 
CONFIG_HZ_250=y
# 使用 schedutil（不锁 performance，避免高温与抖动）
CONFIG_CPU_FREQ_GOV_SCHEDUTIL=y
CONFIG_CPU_FREQ_GOV_PERFORMANCE is not set
CONFIG_CPU_FREQ_GOV_ONDEMAND is not set
CONFIG_CPU_FREQ_GOV_USERSPACE is not set
CONFIG_CPU_FREQ_GOV_POWERSAVE is not set
#关闭调度器自动分组（服务器/桌面特性）
CONFIG_SCHED_AUTOGROUP is not set
=================================================
# 内存管理（路由器稳态）
=================================================
# 明确关闭 THP（A53 + 路由器收益为负）
CONFIG_TRANSPARENT_HUGEPAGE is not set
CONFIG_ARCH_WANTS_THP_SWAP is not set
# 使用内核默认 MGLRU（6.12 已成熟）
=================================================
# 网络转发路径（MT7986 实测最稳）
=================================================
# Busy Poll 在路由器上收益为负，明确关闭
CONFIG_NET_BUSY_POLL is not set
CONFIG_NET_RX_BUSY_POLL is not set
# 多核软中断分流（有效）
CONFIG_RPS=y 
CONFIG_XPS=y
# RFS_ACCEL 对 MT7986 驱动支持不完整，关闭
CONFIG_RFS_ACCEL is not set
=================================================
# Conntrack（AppFilter / fw4 必需）
=================================================
CONFIG_NF_CONNTRACK=y
CONFIG_NF_CONNTRACK_EVENTS=y
CONFIG_NF_CONNTRACK_TIMESTAMP=y 
CONFIG_NF_CONNTRACK_NETLINK=y
=================================================
# Flow Offload / HNAT（MediaTek 专用）
=================================================
CONFIG_NF_FLOW_TABLE=y
CONFIG_NET_MEDIATEK_HNAT=y
=================================================
# 加密加速（ARMv8 CE 指令集）
=================================================
CONFIG_CRYPTO_AES_ARM64_CE=y 
CONFIG_CRYPTO_SHA2_ARM64_CE=y
CONFIG_CRYPTO_GHASH_ARM64_CE=y 
CONFIG_CRYPTO_SM4_ARM64_CE_GCM=y
=================================================
# BPF（最小稳定集，服务 sing-box / fw4）
=================================================
CONFIG_BPF=y
CONFIG_BPF_SYSCALL=y 
CONFIG_BPF_JIT=y 
CONFIG_BPF_EVENTS=y
# 不强制 JIT ALWAYS_ON，避免 BTF 依赖问题
CONFIG_BPF_JIT_ALWAYS_ON is not set
CONFIG_BPF_PRELOAD is not set
CONFIG_DEBUG_INFO_BTF is not set
=================================================
# 调试 / 噪声（全部关闭）
=================================================
CONFIG_DEBUG_INFO is not set
CONFIG_DEBUG_MISC is not set
CONFIG_DEBUG_FS is not set
CONFIG_MAGIC_SYSRQ is not set
CONFIG_PCI_DEBUG is not set
CONFIG_SYSCTL_EXCEPTION_TRACE is not set
=================================================
# 安全（不影响性能的保留项）
=================================================
CONFIG_CPU_MITIGATIONS=y 
CONFIG_RODATA_FULL_DEFAULT_ENABLED=y
=================================================
# Netfilter / fw4 / nftables（核心）
=================================================
CONFIG_NETFILTER=y
CONFIG_NETFILTER_ADVANCED=y 
CONFIG_NETFILTER_XTABLES=y   
# 必须内建nftables（fw4 必须）
CONFIG_NF_TABLES=y 
CONFIG_NF_TABLES_IPV4=y 
CONFIG_NF_TABLES_IPV6=y
# IPv4 iptables（兼容 AppFilter / 老规则）
CONFIG_IP_NF_IPTABLES=m 
CONFIG_IP_NF_FILTER=m 
CONFIG_IP_NF_NAT=m
#IPv6
CONFIG_IPV6=y 
CONFIG_NF_DEFRAG_IPV6=y 
CONFIG_IP6_NF_IPTABLES=m 
CONFIG_IP6_NF_FILTER=m 
CONFIG_IP6_NF_NAT=m
# REJECT（AppFilter / OAF 必需）
CONFIG_NF_REJECT=y 
CONFIG_NF_REJECT_IPV4=m 
CONFIG_NF_REJECT_IPV6=m
